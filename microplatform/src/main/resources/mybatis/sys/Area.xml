<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.micro.cloud.sys.dao.IAreaDao">

    <sql id="AreaColumns">
    a.id,
    a.area_code,
    a.area_name,
    a.parent_id,
    a.short_name,
    a.lng,
    a.lat,
    a.level,
    a.sort,
    a.status
    </sql>
    <sql id="AreaWhere">
    	<where>
	    	 <if test="id!=null">
	            a.id=#{id}
	         </if>
	    	 <if test="areaCode!=null">
	            a.area_code=#{areaCode}
	         </if>
	    	 <if test="areaName!=null">
	            a.area_name=#{areaName}
	         </if>
	    	 <if test="parentId!=null">
	            a.parent_id=#{parentId}
	         </if>
	    	 <if test="shortName!=null">
	            a.short_name=#{shortName}
	         </if>
	    	 <if test="lng!=null">
	            a.lng=#{lng}
	         </if>
	    	 <if test="lat!=null">
	            a.lat=#{lat}
	         </if>
	    	 <if test="level!=null">
	            a.level=#{level}
	         </if>
	    	 <if test="sort!=null">
	            a.sort=#{sort}
	         </if>
	    	 <if test="status!=null">
	            a.status=#{status}
	         </if>
        </where>
    </sql>
    
    <!-- 新增-单个 -->
     <insert id="save" parameterType="com.micro.cloud.frame.sys.entity.Area" useGeneratedKeys="true" keyProperty="id">
        insert into sys_area <trim prefix="(" suffix=")" suffixOverrides="," ><if test=" id != null" >id,</if><if test=" areaCode != null" >area_code,</if><if test=" areaName != null" >area_name,</if><if test=" parentId != null" >parent_id,</if><if test=" shortName != null" >short_name,</if><if test=" lng != null" >lng,</if><if test=" lat != null" >lat,</if><if test=" level != null" >level,</if><if test=" sort != null" >sort,</if><if test=" status != null" >status,</if></trim>
        <trim prefix="values (" suffix=")" suffixOverrides="," ><if test=" id != null" >#{id},</if><if test=" areaCode != null" >#{areaCode},</if><if test=" areaName != null" >#{areaName},</if><if test=" parentId != null" >#{parentId},</if><if test=" shortName != null" >#{shortName},</if><if test=" lng != null" >#{lng},</if><if test=" lat != null" >#{lat},</if><if test=" level != null" >#{level},</if><if test=" sort != null" >#{sort},</if><if test=" status != null" >#{status},</if></trim>
    </insert>
    <!-- 删除-根据ID -->
    <delete id="deleteById">
        delete from sys_area  where id=#{id}
    </delete>
    <!-- 删除-批量删除多个 -->
    <delete id="deleteByIds">
		delete from sys_area where id in <foreach collection="array" item="item" open="(" close=")" separator=",">#{item}</foreach>
	</delete>
	<!-- 删除-所有 -->
    <delete id="deleteAll">
        delete from sys_area
    </delete>
    <!-- 修改-根据ID修改实体对象 -->
    <update id="updateById" parameterType="com.micro.cloud.frame.sys.entity.Area">
        update sys_area <set><if test="id !=null">id=#{id},</if><if test="areaCode !=null">area_code=#{areaCode},</if><if test="areaName !=null">area_name=#{areaName},</if><if test="parentId !=null">parent_id=#{parentId},</if><if test="shortName !=null">short_name=#{shortName},</if><if test="lng !=null">lng=#{lng},</if><if test="lat !=null">lat=#{lat},</if><if test="level !=null">level=#{level},</if><if test="sort !=null">sort=#{sort},</if><if test="status !=null">status=#{status},</if></set> where id=#{id}
    </update>
    <!-- 查询-根据ID查询 -->
    <select id="findById" resultType="com.micro.cloud.frame.sys.entity.Area" parameterType="string">
        SELECT <include refid="AreaColumns"/> FROM sys_area a where a.id=#{id}
    </select>
    <!-- 查询-根据ID查询 -->
    <select id="findOne" resultType="com.micro.cloud.frame.sys.entity.Area" parameterType="com.micro.cloud.frame.sys.entity.Area">
        SELECT <include refid="AreaColumns"/> FROM sys_area a <include refid="AreaWhere"/>
    </select>
    <!-- 查询-所有 -->
    <select id="findAll" resultType="com.micro.cloud.frame.sys.entity.Area" parameterType="com.micro.cloud.frame.sys.entity.Area">
        SELECT <include refid="AreaColumns"/> FROM sys_area a <include refid="AreaWhere"/>
    </select>
    <!-- 查询-所有VO -->
    <select id="findAllVo" resultType="com.micro.cloud.frame.sys.vo.AreaVo" parameterType="com.micro.cloud.frame.sys.entity.Area">
        SELECT <include refid="AreaColumns"/> FROM sys_area a <include refid="AreaWhere"/>
    </select>
    <!-- 查询-总数 -->
    <select id="count" resultType="long">
        SELECT count(a.id) FROM sys_area a 
    </select>
    
</mapper>
