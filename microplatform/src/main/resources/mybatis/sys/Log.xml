<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.micro.cloud.sys.dao.ILogDao">

    <sql id="LogColumns">
    a.id,
    a.ip,
    a.user_agent,
    a.req_ok,
    a.req_method,
    a.req_param,
    a.req_url,
    a.res_param,
    a.creator,
    a.create_date,
    a.remark,
    a.time_consuming,
    a.exception,
    a.status
    </sql>
    <sql id="LogWhere">
    	<where>
	    	 <if test="id!=null">
	            a.id=#{id}
	         </if>
	    	 <if test="ip!=null">
	            a.ip=#{ip}
	         </if>
	    	 <if test="userAgent!=null">
	            a.user_agent=#{userAgent}
	         </if>
	    	 <if test="reqOk!=null">
	            a.req_ok=#{reqOk}
	         </if>
	    	 <if test="reqMethod!=null">
	            a.req_method=#{reqMethod}
	         </if>
	    	 <if test="reqParam!=null">
	            a.req_param=#{reqParam}
	         </if>
	    	 <if test="reqUrl!=null">
	            a.req_url=#{reqUrl}
	         </if>
	    	 <if test="resParam!=null">
	            a.res_param=#{resParam}
	         </if>
	    	 <if test="creator!=null">
	            a.creator=#{creator}
	         </if>
	    	 <if test="createDate!=null">
	            a.create_date=#{createDate}
	         </if>
	    	 <if test="remark!=null">
	            a.remark=#{remark}
	         </if>
	    	 <if test="timeConsuming!=null">
	            a.time_consuming=#{timeConsuming}
	         </if>
	    	 <if test="exception!=null">
	            a.exception=#{exception}
	         </if>
	    	 <if test="status!=null">
	            a.status=#{status}
	         </if>
        </where>
    </sql>
    
    <!-- 新增-单个 -->
     <insert id="save" parameterType="com.micro.cloud.frame.sys.entity.Log" useGeneratedKeys="true" keyProperty="id">
        insert into sys_log <trim prefix="(" suffix=")" suffixOverrides="," ><if test=" id != null" >id,</if><if test=" ip != null" >ip,</if><if test=" userAgent != null" >user_agent,</if><if test=" reqOk != null" >req_ok,</if><if test=" reqMethod != null" >req_method,</if><if test=" reqParam != null" >req_param,</if><if test=" reqUrl != null" >req_url,</if><if test=" resParam != null" >res_param,</if><if test=" creator != null" >creator,</if><if test=" createDate != null" >create_date,</if><if test=" remark != null" >remark,</if><if test=" timeConsuming != null" >time_consuming,</if><if test=" exception != null" >exception,</if><if test=" status != null" >status,</if></trim>
        <trim prefix="values (" suffix=")" suffixOverrides="," ><if test=" id != null" >#{id},</if><if test=" ip != null" >#{ip},</if><if test=" userAgent != null" >#{userAgent},</if><if test=" reqOk != null" >#{reqOk},</if><if test=" reqMethod != null" >#{reqMethod},</if><if test=" reqParam != null" >#{reqParam},</if><if test=" reqUrl != null" >#{reqUrl},</if><if test=" resParam != null" >#{resParam},</if><if test=" creator != null" >#{creator},</if><if test=" createDate != null" >#{createDate},</if><if test=" remark != null" >#{remark},</if><if test=" timeConsuming != null" >#{timeConsuming},</if><if test=" exception != null" >#{exception},</if><if test=" status != null" >#{status},</if></trim>
    </insert>
    <!-- 删除-根据ID -->
    <delete id="deleteById">
        delete from sys_log  where id=#{id}
    </delete>
    <!-- 删除-批量删除多个 -->
    <delete id="deleteByIds">
		delete from sys_log where id in <foreach collection="array" item="item" open="(" close=")" separator=",">#{item}</foreach>
	</delete>
	<!-- 删除-所有 -->
    <delete id="deleteAll">
        delete from sys_log
    </delete>
    <!-- 修改-根据ID修改实体对象 -->
    <update id="updateById" parameterType="com.micro.cloud.frame.sys.entity.Log">
        update sys_log <set><if test="id !=null">id=#{id},</if><if test="ip !=null">ip=#{ip},</if><if test="userAgent !=null">user_agent=#{userAgent},</if><if test="reqOk !=null">req_ok=#{reqOk},</if><if test="reqMethod !=null">req_method=#{reqMethod},</if><if test="reqParam !=null">req_param=#{reqParam},</if><if test="reqUrl !=null">req_url=#{reqUrl},</if><if test="resParam !=null">res_param=#{resParam},</if><if test="creator !=null">creator=#{creator},</if><if test="createDate !=null">create_date=#{createDate},</if><if test="remark !=null">remark=#{remark},</if><if test="timeConsuming !=null">time_consuming=#{timeConsuming},</if><if test="exception !=null">exception=#{exception},</if><if test="status !=null">status=#{status},</if></set> where id=#{id}
    </update>
    <!-- 查询-根据ID查询 -->
    <select id="findById" resultType="com.micro.cloud.frame.sys.entity.Log" parameterType="string">
        SELECT <include refid="LogColumns"/> FROM sys_log a where a.id=#{id}
    </select>
    <!-- 查询-根据ID查询 -->
    <select id="findOne" resultType="com.micro.cloud.frame.sys.entity.Log" parameterType="com.micro.cloud.frame.sys.entity.Log">
        SELECT <include refid="LogColumns"/> FROM sys_log a <include refid="LogWhere"/>
    </select>
    <!-- 查询-所有 -->
    <select id="findAll" resultType="com.micro.cloud.frame.sys.entity.Log" parameterType="com.micro.cloud.frame.sys.entity.Log">
        SELECT <include refid="LogColumns"/> FROM sys_log a <include refid="LogWhere"/>
    </select>
    <!-- 查询-所有VO -->
    <select id="findAllVo" resultType="com.micro.cloud.frame.sys.vo.LogVo" parameterType="com.micro.cloud.frame.sys.entity.Log">
        SELECT <include refid="LogColumns"/> FROM sys_log a <include refid="LogWhere"/>
    </select>
    <!-- 查询-总数 -->
    <select id="count" resultType="long">
        SELECT count(a.id) FROM sys_log a 
    </select>
    
</mapper>
